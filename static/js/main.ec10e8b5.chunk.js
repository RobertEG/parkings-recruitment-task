(this["webpackJsonpparkings-recruitment-task"]=this["webpackJsonpparkings-recruitment-task"]||[]).push([[0],{107:function(e,t,a){e.exports=a(121)},117:function(e,t,a){},118:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),i=a(66),o=a.n(i),c=a(41),s=a(59),p=a(45),l=a(46),d=a(49),u=a(47),m=a(50),h=[{type:"Feature",properties:{street:"Kili\u0144skiego",spots:30,handicappedSpots:5,paid:!1},geometry:{type:"Polygon",coordinates:[[[18.607124984264374,54.383119158030894],[18.60694795846939,54.3830972897736],[18.607023060321808,54.38280675324947],[18.60720008611679,54.38282237354499],[18.607124984264374,54.383119158030894]]]}},{type:"Feature",properties:{street:"Kili\u0144skiego",spots:10,handicappedSpots:2,paid:!1},geometry:{type:"Polygon",coordinates:[[[18.60696941614151,54.38381425013866],[18.607036471366882,54.38382362208665],[18.607028424739838,54.38385954786748],[18.607057929038998,54.383942333242686],[18.606937229633328,54.38393296132179],[18.60696941614151,54.38381425013866]]]}},{type:"Feature",properties:{street:"Lelewela",spots:10,handicappedSpots:0,paid:!1},geometry:{type:"Polygon",coordinates:[[[18.606451749801636,54.38389703560523],[18.606915771961212,54.383937647282494],[18.606915771961212,54.38397513494889],[18.60644906759262,54.38393296132179],[18.606451749801636,54.38389703560523]]]}},{type:"Feature",properties:{street:"Gra\u017cyny",spots:50,handicappedSpots:8,paid:!0},geometry:{type:"Polygon",coordinates:[[[18.609997630119324,54.382350637998535],[18.609740138053894,54.382310024751],[18.60982060432434,54.38205384795578],[18.6100834608078,54.38207884088423],[18.609997630119324,54.382350637998535]]]}},{type:"Feature",properties:{street:"Go\u0142\u0119bia",spots:40,handicappedSpots:8,paid:!0},geometry:{type:"Polygon",coordinates:[[[18.606363236904144,54.38519346546863],[18.606390058994293,54.38509818707769],[18.607280552387238,54.38521845648537],[18.60724300146103,54.385298115249675],[18.606363236904144,54.38519346546863]]]}},{type:"Feature",properties:{street:"Go\u0142\u0119bia",spots:40,handicappedSpots:8,paid:!0},geometry:{type:"Polygon",coordinates:[[[18.60735297203064,54.385316858465885],[18.607390522956848,54.38523563780056],[18.608112037181854,54.38536371646891],[18.608069121837616,54.38545743231448],[18.60735297203064,54.385316858465885]]]}},{type:"Feature",properties:{street:"Lelewela",spots:60,handicappedSpots:10,paid:!1},geometry:{type:"Polygon",coordinates:[[[18.609088361263275,54.384851399397334],[18.60899716615677,54.384842027684044],[18.60884428024292,54.38427972096933],[18.608836233615875,54.38416725870193],[18.608940839767456,54.384170382657956],[18.60893279314041,54.38419225034353],[18.609088361263275,54.384851399397334]]]}}],y=function(e,t){var a=t.toLowerCase();return e.filter((function(e){return e.properties.street.toLowerCase().includes(a)}))},g=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearchChange=function(e){a.props.searchParkings(e.currentTarget.value)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui large icon input",style:{margin:"10px 0px 0px 10px"}},r.a.createElement("input",{type:"text",placeholder:"Szukaj parkingu",value:this.props.parkingsSearch,onChange:this.handleSearchChange}),r.a.createElement("i",{className:"search icon"}))}}]),t}(r.a.Component),v={searchParkings:function(e){return{type:"SEARCH_PARKINGS",text:e}}},f=Object(c.b)((function(e){return{parkingsSearch:e.parkingsSearch}}),v)(g),k=a(38),E=function(e){var t=e.spots,a=e.hSpots,n=e.paid;return r.a.createElement("div",{className:"ui raised segments",style:{margin:"3px"}},r.a.createElement("div",{className:"ui segment spots"},"Ilo\u015b\u0107 miejsc parkingowych: ",t),r.a.createElement("div",{className:"ui segment handicappedSpots"},"Ilo\u015b\u0107 miejsc dla niepe\u0142nosprawnych: ",a),r.a.createElement("div",{className:"ui segment paid"},n))};a(117);function O(e){return!0===e?"P\u0142atny":"Bezp\u0142atny"}var S=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(d.a)(this,Object(u.a)(t).call(this))).parkingToParkingItem=function(t){var a=t.properties.street,n=t.properties.spots,i=t.properties.handicappedSpots,o=O(t.properties.paid);return r.a.createElement("div",{key:t.geometry.coordinates,className:"item",style:{maxWidth:"30vw"}},r.a.createElement("div",{onClick:function(){return e.props.fetchSelected(t)},onMouseOver:function(){return e.props.fetchOnMouseOver(t)},onMouseOut:function(){return e.props.fetchOnMouseOver(!1)},className:"ui block grey inverted header"},"Ulica ",a),e.state.editClicked&&e.state.clickedParkingID===t.geometry.coordinates?r.a.createElement("div",null,r.a.createElement("div",{className:"ui raised segments",style:{margin:"3px"}},r.a.createElement("div",{className:"ui form field segment spots"},r.a.createElement("input",{type:"number",ref:"numParkings",defaultValue:n,min:"0",placeholder:"Ilo\u015b\u0107 miejsc parkingowych"})),r.a.createElement("div",{className:"ui form field segment handicappedSpots"},r.a.createElement("input",{type:"number",ref:"handicappedSpotsAmount",defaultValue:i,min:"0",placeholder:"Ilo\u015b\u0107 miejsc dla niepe\u0142nosprawnych"})),r.a.createElement("div",{className:"ui form field segment paid"},r.a.createElement("div",{className:"inline fields",onChange:e.paidSelectionChanged},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",name:"paid",id:"platny",defaultChecked:!0===e.state.paidSelected||"true"===e.state.paidSelected,value:!0}),r.a.createElement("label",{htmlFor:"platny"},"P\u0142atny"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",name:"paid",id:"bezplatny",defaultChecked:!1===e.state.paidSelected||"false"===e.state.paidSelected,value:!1}),r.a.createElement("label",{htmlFor:"bezplatny"},"Bezp\u0142atny")))))),r.a.createElement("div",{className:"right floated content"},r.a.createElement("div",{className:"ui tiny yellow button",onClick:function(){return e.handleClickSave(t.geometry.coordinates,t)}},"Zapisz"),r.a.createElement("div",{className:"ui tiny brown button",onClick:function(){return e.props.removeParking(t)}},"Usu\u0144"))):r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return e.props.fetchSelected(t)},onMouseOver:function(){return e.props.fetchOnMouseOver(t)},onMouseOut:function(){return e.props.fetchOnMouseOver(!1)}},r.a.createElement(E,{spots:n,hSpots:i,paid:o})),r.a.createElement("div",{className:"right floated content"},r.a.createElement("div",{className:"ui tiny orange button",onClick:function(){return e.handleClickEdit(t.geometry.coordinates)}},"Edytuj"),r.a.createElement("div",{className:"ui tiny brown button",onClick:function(){return e.props.removeParking(t)}},"Usu\u0144"))))},e.state={editClicked:!1,clickedParkingID:[],currentVal:null,paidSelected:!1},e.handleClickEdit=e.handleClickEdit.bind(Object(k.a)(e)),e.handleClickSave=e.handleClickSave.bind(Object(k.a)(e)),e.paidSelectionChanged=e.paidSelectionChanged.bind(Object(k.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"paidSelectionChanged",value:function(e){this.setState({paidSelected:e.target.value})}},{key:"handleClickEdit",value:function(e){this.setState({editClicked:!0,clickedParkingID:e})}},{key:"handleClickSave",value:function(e,t){this.setState({editClicked:!1,clickedParkingID:e});var a="true"===this.state.paidSelected||!0===this.state.paidSelected;this.props.editParking(t,this.refs.numParkings.value,this.refs.handicappedSpotsAmount.value,a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui relaxed divided list selection"},this.props.parkings.map(this.parkingToParkingItem))}}]),t}(r.a.Component),b={fetchOnMouseOver:function(e){return{type:"FETCH_ON_MOUSE_OVER",payload:e}},fetchSelected:function(e){return{type:"FETCH_SELECTED",payload:e}},removeParking:function(e){return{type:"REMOVE_PARKING",payload:e}},editParking:function(e,t,a,n){return{type:"EDIT_PARKING",parking:e,spotsAmount:t,handicappedSpotsAmount:a,paidSelected:n}}},w=Object(c.b)((function(e){return{fetchSelected:e.fetchSelected,fetchOnMouseOver:e.fetchOnMouseOver,removeParkings:e.removeParkings,editParking:e.editParking}}),b)(S),C=a(88),j=a(91),P=a(76),N=a(89),M=a(8),L=a(64),I=a(39),G=a(79),F=a(80),A=a(123),V=a(65),_=a(84),x=(a(118),Object(M.d)([18.608097630119325,54.38395063799854])),R=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(d.a)(this,Object(u.a)(t).call(this))).state={center:x,zoom:16,parking:[]},e.checkObjectFromMap.bind(Object(k.a)(e)),e.onClickNewLayer.bind(Object(k.a)(e)),e.onMouseOverNewLayer.bind(Object(k.a)(e)),e.parkingsGeometryLayer.bind(Object(k.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"checkObjectFromMap",value:function(){var e=this.map,t=this.props.parkings,a=new I.a([]);e.on("pointermove",(function(n){var r=t.filter((function(e){return(a=new I.a([e.geometry.coordinates[0]])).transform("EPSG:4326","EPSG:3857"),!!a.intersectsCoordinate(n.coordinate)&&e}));void 0!==r[0]?(e.getOverlayById(0).getElement().style.display="block",document.getElementById("popup-content").innerHTML="<p>Ilo\u015b\u0107 miejsc parkingowych: "+r[0].properties.spots+"</p><p>Ilo\u015b\u0107 miejsc parkingowych dla niepe\u0142nosprawnych: "+r[0].properties.handicappedSpots+"</p><p>"+O(r[0].properties.paid)+"</p>",e.getOverlayById(0).setPosition(n.coordinate)):e.getOverlayById(0).setPosition(void 0)}))}},{key:"parkingsGeometryLayer",value:function(e){this.map.removeLayer(this.parkingsGeometryVectorLayer);var t=new F.a,a=new L.a,n=new V.a({color:"#990000",width:1.25}),r=[new _.b({stroke:n})];return e.map((function(e){var n=e.geometry.coordinates[0],i=new I.a([n]);return i.transform("EPSG:4326","EPSG:3857"),(a=new L.a(i)).setStyle(r),t.addFeature(a)})),this.parkingsGeometryVectorLayer=new G.a({source:t}),this.map.addLayer(this.parkingsGeometryVectorLayer)}},{key:"onClickNewLayer",value:function(e){this.map.removeLayer(this.onClickVectorLayer);var t=e.geometry.coordinates[0];this.polygon=new I.a([t]),this.polygon.transform("EPSG:4326","EPSG:3857");var a=new L.a(this.polygon),n=new F.a;n.addFeature(a),this.onClickVectorLayer=new G.a({source:n});var r=Object(M.d)(e.geometry.coordinates[0][0]);this.map.getView().setCenter(r),this.map.getView().setZoom(17),this.map.addLayer(this.onClickVectorLayer)}},{key:"onMouseOverNewLayer",value:function(e){if(!1===e)this.map.removeLayer(this.onMouseOverVectorLayer);else{var t=e.geometry.coordinates[0],a=new I.a([t]);a.transform("EPSG:4326","EPSG:3857");var n=new L.a(a),r=new F.a;r.addFeature(n),this.onMouseOverVectorLayer=new G.a({source:r}),this.map.addLayer(this.onMouseOverVectorLayer)}}},{key:"componentDidMount",value:function(){var e=new j.a({id:0,element:document.getElementById("popup"),autoPan:!0,autoPanAnimation:{duration:250}});this.map=new C.a({target:"map",overlays:[e],layers:[new N.a({source:new A.a})],view:new P.a({center:this.state.center,zoom:this.state.zoom})})}},{key:"componentDidUpdate",value:function(e){e.fetchSelected!==this.props.fetchSelected&&this.onClickNewLayer(this.props.fetchSelected),e.fetchOnMouseOver!==this.props.fetchOnMouseOver&&this.onMouseOverNewLayer(this.props.fetchOnMouseOver),e.parkings!==this.props.parkings&&(this.parkingsGeometryLayer(this.props.parkings),this.checkObjectFromMap())}},{key:"render",value:function(){return r.a.createElement("div",{id:"map"},r.a.createElement("div",{id:"popup",className:"ol-popup"},r.a.createElement("div",{id:"popup-content"})))}}]),t}(r.a.Component),T=Object(c.b)((function(e){return{fetchSelected:e.fetchSelected,fetchOnMouseOver:e.fetchOnMouseOver,parkings:e.parkings}}))(R),D=(a(120),function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.parkingsFetched(h)}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement("div",{className:"ui grid"},r.a.createElement("div",{className:"six wide column"},r.a.createElement("div",{className:"parking-list"},r.a.createElement(w,{parkings:this.props.parkings}))),r.a.createElement("div",{className:"ten wide column"},r.a.createElement(f,null),r.a.createElement(T,null))))}}]),t}(r.a.Component)),K={parkingsFetched:function(e){return{type:"FETCH_PARKINGS",parkings:e}}},z=Object(c.b)((function(e){return{parkings:y(e.parkings,e.parkingsSearch)}}),K)(D),H=a(85),B=a(90),U=Object(s.b)({parkings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PARKINGS":return Object(B.a)(t.parkings);case"REMOVE_PARKING":return e.filter((function(e){return e!==t.payload}));case"EDIT_PARKING":return e.map((function(e){return e===t.parking?Object(H.a)({},e,{properties:Object(H.a)({},e.properties,{spots:t.spotsAmount,handicappedSpots:t.handicappedSpotsAmount,paid:t.paidSelected})}):e}));default:return e}},parkingsSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_PARKINGS":return t.text;default:return e}},fetchSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SELECTED":return t.payload;default:return e}},fetchOnMouseOver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ON_MOUSE_OVER":return t.payload;default:return e}}});o.a.render(r.a.createElement(c.a,{store:Object(s.c)(U)},r.a.createElement(z,null)),document.querySelector("#root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.ec10e8b5.chunk.js.map