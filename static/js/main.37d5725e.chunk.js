(this["webpackJsonpparkings-recruitment-task"]=this["webpackJsonpparkings-recruitment-task"]||[]).push([[0],{103:function(e,t,a){e.exports=a(117)},113:function(e,t,a){},114:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),i=a(64),o=a.n(i),c=a(39),s=a(59),p=a(44),l=a(45),d=a(48),u=a(46),m=a(49),h=[{type:"Feature",properties:{street:"Kili\u0144skiego",spots:30,handicappedSpots:5,paid:!1},geometry:{type:"Polygon",coordinates:[[[18.607124984264374,54.383119158030894],[18.60694795846939,54.3830972897736],[18.607023060321808,54.38280675324947],[18.60720008611679,54.38282237354499],[18.607124984264374,54.383119158030894]]]}},{type:"Feature",properties:{street:"Kili\u0144skiego",spots:10,handicappedSpots:2,paid:!1},geometry:{type:"Polygon",coordinates:[[[18.60696941614151,54.38381425013866],[18.607036471366882,54.38382362208665],[18.607028424739838,54.38385954786748],[18.607057929038998,54.383942333242686],[18.606937229633328,54.38393296132179],[18.60696941614151,54.38381425013866]]]}},{type:"Feature",properties:{street:"Lelewela",spots:10,handicappedSpots:0,paid:!1},geometry:{type:"Polygon",coordinates:[[[18.606451749801636,54.38389703560523],[18.606915771961212,54.383937647282494],[18.606915771961212,54.38397513494889],[18.60644906759262,54.38393296132179],[18.606451749801636,54.38389703560523]]]}},{type:"Feature",properties:{street:"Gra\u017cyny",spots:50,handicappedSpots:8,paid:!0},geometry:{type:"Polygon",coordinates:[[[18.609997630119324,54.382350637998535],[18.609740138053894,54.382310024751],[18.60982060432434,54.38205384795578],[18.6100834608078,54.38207884088423],[18.609997630119324,54.382350637998535]]]}},{type:"Feature",properties:{street:"Go\u0142\u0119bia",spots:40,handicappedSpots:8,paid:!0},geometry:{type:"Polygon",coordinates:[[[18.606363236904144,54.38519346546863],[18.606390058994293,54.38509818707769],[18.607280552387238,54.38521845648537],[18.60724300146103,54.385298115249675],[18.606363236904144,54.38519346546863]]]}},{type:"Feature",properties:{street:"Go\u0142\u0119bia",spots:40,handicappedSpots:8,paid:!0},geometry:{type:"Polygon",coordinates:[[[18.60735297203064,54.385316858465885],[18.607390522956848,54.38523563780056],[18.608112037181854,54.38536371646891],[18.608069121837616,54.38545743231448],[18.60735297203064,54.385316858465885]]]}},{type:"Feature",properties:{street:"Lelewela",spots:60,handicappedSpots:10,paid:!1},geometry:{type:"Polygon",coordinates:[[[18.609088361263275,54.384851399397334],[18.60899716615677,54.384842027684044],[18.60884428024292,54.38427972096933],[18.608836233615875,54.38416725870193],[18.608940839767456,54.384170382657956],[18.60893279314041,54.38419225034353],[18.609088361263275,54.384851399397334]]]}}],y=function(e,t){var a=t.toLowerCase();return e.filter((function(e){return e.properties.street.toLowerCase().includes(a)}))},v=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSearchChange=function(e){a.props.searchParkings(e.currentTarget.value)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui large icon input",style:{margin:"10px 0px 0px 10px"}},r.a.createElement("input",{type:"text",placeholder:"Szukaj parkingu",value:this.props.parkingsSearch,onChange:this.handleSearchChange}),r.a.createElement("i",{className:"search icon"}))}}]),t}(r.a.Component),g={searchParkings:function(e){return{type:"SEARCH_PARKINGS",text:e}}},f=Object(c.b)((function(e){return{parkingsSearch:e.parkingsSearch}}),g)(v),k=a(41),O=function(e){var t=e.spots,a=e.hSpots,n=e.paid;return r.a.createElement("div",{className:"ui raised segments",style:{margin:"3px"}},r.a.createElement("div",{className:"ui segment spots"},"Ilo\u015b\u0107 miejsc parkingowych: ",t),r.a.createElement("div",{className:"ui segment handicappedSpots"},"Ilo\u015b\u0107 miejsc dla niepe\u0142nosprawnych: ",a),r.a.createElement("div",{className:"ui segment paid"},n))};a(113);function E(e){return!0===e?"P\u0142atny":"Bezp\u0142atny"}var S=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(d.a)(this,Object(u.a)(t).call(this))).parkingToParkingItem=function(t){var a=t.properties.street,n=t.properties.spots,i=t.properties.handicappedSpots,o=E(t.properties.paid);return r.a.createElement("div",{key:t.geometry.coordinates,className:"item",style:{maxWidth:"30vw"}},r.a.createElement("div",{onClick:function(){return e.props.fetchSelected(t)},onMouseOver:function(){return e.props.fetchOnMouseOver(t)},onMouseOut:function(){return e.props.fetchOnMouseOver(!1)},className:"ui block grey inverted header"},"Ulica ",a),e.state.editClicked&&e.state.clickedParkingID===t.geometry.coordinates?r.a.createElement("div",null,r.a.createElement("div",{className:"ui raised segments",style:{margin:"3px"}},r.a.createElement("div",{className:"ui form field segment spots"},r.a.createElement("input",{type:"number",ref:"numParkings",defaultValue:n,min:"0",placeholder:"Ilo\u015b\u0107 miejsc parkingowych"})),r.a.createElement("div",{className:"ui form field segment handicappedSpots"},r.a.createElement("input",{type:"number",ref:"handicappedSpotsAmount",defaultValue:i,min:"0",placeholder:"Ilo\u015b\u0107 miejsc dla niepe\u0142nosprawnych"})),r.a.createElement("div",{className:"ui form field segment paid"},r.a.createElement("div",{className:"inline fields",onChange:e.paidSelectionChanged},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",name:"paid",id:"platny",defaultChecked:!0===e.state.paidSelected||"true"===e.state.paidSelected,value:!0}),r.a.createElement("label",{htmlFor:"platny"},"P\u0142atny"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",name:"paid",id:"bezplatny",defaultChecked:!1===e.state.paidSelected||"false"===e.state.paidSelected,value:!1}),r.a.createElement("label",{htmlFor:"bezplatny"},"Bezp\u0142atny")))))),r.a.createElement("div",{className:"right floated content"},r.a.createElement("div",{className:"ui tiny yellow button",onClick:function(){return e.handleClickSave(t.geometry.coordinates,t)}},"Zapisz"),r.a.createElement("div",{className:"ui tiny brown button",onClick:function(){return e.props.removeParking(t)}},"Usu\u0144"))):r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return e.props.fetchSelected(t)},onMouseOver:function(){return e.props.fetchOnMouseOver(t)},onMouseOut:function(){return e.props.fetchOnMouseOver(!1)}},r.a.createElement(O,{spots:n,hSpots:i,paid:o})),r.a.createElement("div",{className:"right floated content"},r.a.createElement("div",{className:"ui tiny orange button",onClick:function(){return e.handleClickEdit(t.geometry.coordinates)}},"Edytuj"),r.a.createElement("div",{className:"ui tiny brown button",onClick:function(){return e.props.removeParking(t)}},"Usu\u0144"))))},e.state={editClicked:!1,clickedParkingID:[],currentVal:null,paidSelected:!1},e.handleClickEdit=e.handleClickEdit.bind(Object(k.a)(e)),e.handleClickSave=e.handleClickSave.bind(Object(k.a)(e)),e.paidSelectionChanged=e.paidSelectionChanged.bind(Object(k.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"paidSelectionChanged",value:function(e){this.setState({paidSelected:e.target.value})}},{key:"handleClickEdit",value:function(e){this.setState({editClicked:!0,clickedParkingID:e})}},{key:"handleClickSave",value:function(e,t){this.setState({editClicked:!1,clickedParkingID:e});var a="true"===this.state.paidSelected||!0===this.state.paidSelected;this.props.editParking(t,this.refs.numParkings.value,this.refs.handicappedSpotsAmount.value,a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui relaxed divided list selection"},this.props.parkings.map(this.parkingToParkingItem))}}]),t}(r.a.Component),b={fetchOnMouseOver:function(e){return{type:"FETCH_ON_MOUSE_OVER",payload:e}},fetchSelected:function(e){return{type:"FETCH_SELECTED",payload:e}},removeParking:function(e){return{type:"REMOVE_PARKING",payload:e}},editParking:function(e,t,a,n){return{type:"EDIT_PARKING",parking:e,spotsAmount:t,handicappedSpotsAmount:a,paidSelected:n}}},C=Object(c.b)((function(e){return{fetchSelected:e.fetchSelected,fetchOnMouseOver:e.fetchOnMouseOver,removeParkings:e.removeParkings,editParking:e.editParking}}),b)(S),j=a(85),w=a(88),N=a(73),P=a(86),M=a(8),I=a(79),L=a(53),F=a(80),A=a(81),_=a(120),x=(a(114),Object(M.d)([18.608097630119325,54.38375063799854])),G=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(d.a)(this,Object(u.a)(t).call(this))).state={center:x,zoom:16},e.checkObjectFromMap.bind(Object(k.a)(e)),e.onClickNewLayer.bind(Object(k.a)(e)),e.onMouseOverNewLayer.bind(Object(k.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"checkObjectFromMap",value:function(e,t){var a=this.map;a.on("pointermove",(function(n){e.intersectsCoordinate(n.coordinate)?(a.getOverlayById(0).getElement().style.display="block",document.getElementById("popup-content").innerHTML="<p>Ilo\u015b\u0107 miejsc parkingowych: "+t.properties.spots+"</p><p>Ilo\u015b\u0107 miejsc parkingowych dla niepe\u0142nosprawnych: "+t.properties.handicappedSpots+"</p><p>"+E(t.properties.paid)+"</p>",a.getOverlayById(0).setPosition(n.coordinate)):a.getOverlayById(0).setPosition(void 0)}))}},{key:"onClickNewLayer",value:function(e){this.map.removeLayer(this.onClickVectorLayer);var t=e.geometry.coordinates[0];this.polygon=new L.a([t]),this.polygon.transform("EPSG:4326","EPSG:3857");var a=new I.a(this.polygon),n=new A.a;n.addFeature(a),this.onClickVectorLayer=new F.a({source:n});var r=Object(M.d)(e.geometry.coordinates[0][0]);this.map.getView().setCenter(r),this.map.getView().setZoom(17),this.map.addLayer(this.onClickVectorLayer)}},{key:"onMouseOverNewLayer",value:function(e){if(!1===e)this.map.removeLayer(this.onMouseOverVectorLayer);else{var t=e.geometry.coordinates[0],a=new L.a([t]);a.transform("EPSG:4326","EPSG:3857");var n=new I.a(a),r=new A.a;r.addFeature(n),this.onMouseOverVectorLayer=new F.a({source:r}),this.map.addLayer(this.onMouseOverVectorLayer)}}},{key:"componentDidMount",value:function(){var e=new w.a({id:0,element:document.getElementById("popup"),autoPan:!0,autoPanAnimation:{duration:250}});this.map=new j.a({target:"map",overlays:[e],layers:[new P.a({source:new _.a})],view:new N.a({center:this.state.center,zoom:this.state.zoom})})}},{key:"componentDidUpdate",value:function(e){e.fetchSelected!==this.props.fetchSelected&&(this.onClickNewLayer(this.props.fetchSelected),this.checkObjectFromMap(this.polygon,this.props.fetchSelected)),e.fetchOnMouseOver!==this.props.fetchOnMouseOver&&this.onMouseOverNewLayer(this.props.fetchOnMouseOver)}},{key:"render",value:function(){return r.a.createElement("div",{id:"map"},r.a.createElement("div",{id:"popup",className:"ol-popup"},r.a.createElement("div",{id:"popup-content"})))}}]),t}(r.a.Component),V=Object(c.b)((function(e){return{fetchSelected:e.fetchSelected,fetchOnMouseOver:e.fetchOnMouseOver}}))(G),R=(a(116),function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.parkingsFetched(h)}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui container"},r.a.createElement("div",{className:"ui grid"},r.a.createElement("div",{className:"six wide column"},r.a.createElement("div",{className:"parking-list"},r.a.createElement(C,{parkings:this.props.parkings}))),r.a.createElement("div",{className:"ten wide column"},r.a.createElement(f,null),r.a.createElement(V,null))))}}]),t}(r.a.Component)),T={parkingsFetched:function(e){return{type:"FETCH_PARKINGS",parkings:e}}},D=Object(c.b)((function(e){return{parkings:y(e.parkings,e.parkingsSearch)}}),T)(R),K=a(82),z=a(87),H=Object(s.b)({parkings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PARKINGS":return Object(z.a)(t.parkings);case"REMOVE_PARKING":return e.filter((function(e){return e!==t.payload}));case"EDIT_PARKING":return e.map((function(e){return e===t.parking?Object(K.a)({},e,{properties:Object(K.a)({},e.properties,{spots:t.spotsAmount,handicappedSpots:t.handicappedSpotsAmount,paid:t.paidSelected})}):e}));default:return e}},parkingsSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_PARKINGS":return t.text;default:return e}},fetchSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SELECTED":return t.payload;default:return e}},fetchOnMouseOver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ON_MOUSE_OVER":return t.payload;default:return e}}});o.a.render(r.a.createElement(c.a,{store:Object(s.c)(H)},r.a.createElement(D,null)),document.querySelector("#root"))}},[[103,1,2]]]);
//# sourceMappingURL=main.37d5725e.chunk.js.map